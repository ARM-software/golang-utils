<!DOCTYPE html>
<!--
-- Copyright (C) 2020-2021 Arm Limited or its affiliates and Contributors. All rights reserved.
-- SPDX-License-Identifier: Apache-2.0
-->
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Source: doc.go in package text/template</title>
<link href="../../../css/light-v0.4.1.css" rel="stylesheet">
<script src="../../../jvs/golds-v0.4.1.js"></script>
<body onload="onPageLoad()"><div>

<pre id="header"><code><span class="title">Source File</span>
	doc.go

<span class="title">Belonging Package</span>
	<a href="../../../pkg/text/template.html">text/template</a>
</code></pre>

<pre class="line-numbers">
<span class="codeline" id="line-1"><code><span class="comment">// Copyright 2011 The Go Authors. All rights reserved.</span></code></span>
<span class="codeline" id="line-2"><code><span class="comment">// Use of this source code is governed by a BSD-style</span></code></span>
<span class="codeline" id="line-3"><code><span class="comment">// license that can be found in the LICENSE file.</span></code></span>
<span class="codeline" id="line-4"><code></code></span>
<div class="anchor" id="doc"><span class="codeline" id="line-5"><code><span class="comment">/*</span></code></span>
<span class="codeline" id="line-6"><code><span class="comment">Package template implements data-driven templates for generating textual output.</span></code></span>
<span class="codeline" id="line-7"><code></code></span>
<span class="codeline" id="line-8"><code><span class="comment">To generate HTML output, see package html/template, which has the same interface</span></code></span>
<span class="codeline" id="line-9"><code><span class="comment">as this package but automatically secures HTML output against certain attacks.</span></code></span>
<span class="codeline" id="line-10"><code></code></span>
<span class="codeline" id="line-11"><code><span class="comment">Templates are executed by applying them to a data structure. Annotations in the</span></code></span>
<span class="codeline" id="line-12"><code><span class="comment">template refer to elements of the data structure (typically a field of a struct</span></code></span>
<span class="codeline" id="line-13"><code><span class="comment">or a key in a map) to control execution and derive values to be displayed.</span></code></span>
<span class="codeline" id="line-14"><code><span class="comment">Execution of the template walks the structure and sets the cursor, represented</span></code></span>
<span class="codeline" id="line-15"><code><span class="comment">by a period '.' and called "dot", to the value at the current location in the</span></code></span>
<span class="codeline" id="line-16"><code><span class="comment">structure as execution proceeds.</span></code></span>
<span class="codeline" id="line-17"><code></code></span>
<span class="codeline" id="line-18"><code><span class="comment">The input text for a template is UTF-8-encoded text in any format.</span></code></span>
<span class="codeline" id="line-19"><code><span class="comment">"Actions"--data evaluations or control structures--are delimited by</span></code></span>
<span class="codeline" id="line-20"><code><span class="comment">"{{" and "}}"; all text outside actions is copied to the output unchanged.</span></code></span>
<span class="codeline" id="line-21"><code><span class="comment">Except for raw strings, actions may not span newlines, although comments can.</span></code></span>
<span class="codeline" id="line-22"><code></code></span>
<span class="codeline" id="line-23"><code><span class="comment">Once parsed, a template may be executed safely in parallel, although if parallel</span></code></span>
<span class="codeline" id="line-24"><code><span class="comment">executions share a Writer the output may be interleaved.</span></code></span>
<span class="codeline" id="line-25"><code></code></span>
<span class="codeline" id="line-26"><code><span class="comment">Here is a trivial example that prints "17 items are made of wool".</span></code></span>
<span class="codeline" id="line-27"><code></code></span>
<span class="codeline" id="line-28"><code><span class="comment">	type Inventory struct {</span></code></span>
<span class="codeline" id="line-29"><code><span class="comment">		Material string</span></code></span>
<span class="codeline" id="line-30"><code><span class="comment">		Count    uint</span></code></span>
<span class="codeline" id="line-31"><code><span class="comment">	}</span></code></span>
<span class="codeline" id="line-32"><code><span class="comment">	sweaters := Inventory{"wool", 17}</span></code></span>
<span class="codeline" id="line-33"><code><span class="comment">	tmpl, err := template.New("test").Parse("{{.Count}} items are made of {{.Material}}")</span></code></span>
<span class="codeline" id="line-34"><code><span class="comment">	if err != nil { panic(err) }</span></code></span>
<span class="codeline" id="line-35"><code><span class="comment">	err = tmpl.Execute(os.Stdout, sweaters)</span></code></span>
<span class="codeline" id="line-36"><code><span class="comment">	if err != nil { panic(err) }</span></code></span>
<span class="codeline" id="line-37"><code></code></span>
<span class="codeline" id="line-38"><code><span class="comment">More intricate examples appear below.</span></code></span>
<span class="codeline" id="line-39"><code></code></span>
<span class="codeline" id="line-40"><code><span class="comment">Text and spaces</span></code></span>
<span class="codeline" id="line-41"><code></code></span>
<span class="codeline" id="line-42"><code><span class="comment">By default, all text between actions is copied verbatim when the template is</span></code></span>
<span class="codeline" id="line-43"><code><span class="comment">executed. For example, the string " items are made of " in the example above</span></code></span>
<span class="codeline" id="line-44"><code><span class="comment">appears on standard output when the program is run.</span></code></span>
<span class="codeline" id="line-45"><code></code></span>
<span class="codeline" id="line-46"><code><span class="comment">However, to aid in formatting template source code, if an action's left</span></code></span>
<span class="codeline" id="line-47"><code><span class="comment">delimiter (by default "{{") is followed immediately by a minus sign and white</span></code></span>
<span class="codeline" id="line-48"><code><span class="comment">space, all trailing white space is trimmed from the immediately preceding text.</span></code></span>
<span class="codeline" id="line-49"><code><span class="comment">Similarly, if the right delimiter ("}}") is preceded by white space and a minus</span></code></span>
<span class="codeline" id="line-50"><code><span class="comment">sign, all leading white space is trimmed from the immediately following text.</span></code></span>
<span class="codeline" id="line-51"><code><span class="comment">In these trim markers, the white space must be present:</span></code></span>
<span class="codeline" id="line-52"><code><span class="comment">"{{- 3}}" is like "{{3}}" but trims the immediately preceding text, while</span></code></span>
<span class="codeline" id="line-53"><code><span class="comment">"{{-3}}" parses as an action containing the number -3.</span></code></span>
<span class="codeline" id="line-54"><code></code></span>
<span class="codeline" id="line-55"><code><span class="comment">For instance, when executing the template whose source is</span></code></span>
<span class="codeline" id="line-56"><code></code></span>
<span class="codeline" id="line-57"><code><span class="comment">	"{{23 -}} &lt; {{- 45}}"</span></code></span>
<span class="codeline" id="line-58"><code></code></span>
<span class="codeline" id="line-59"><code><span class="comment">the generated output would be</span></code></span>
<span class="codeline" id="line-60"><code></code></span>
<span class="codeline" id="line-61"><code><span class="comment">	"23&lt;45"</span></code></span>
<span class="codeline" id="line-62"><code></code></span>
<span class="codeline" id="line-63"><code><span class="comment">For this trimming, the definition of white space characters is the same as in Go:</span></code></span>
<span class="codeline" id="line-64"><code><span class="comment">space, horizontal tab, carriage return, and newline.</span></code></span>
<span class="codeline" id="line-65"><code></code></span>
<span class="codeline" id="line-66"><code><span class="comment">Actions</span></code></span>
<span class="codeline" id="line-67"><code></code></span>
<span class="codeline" id="line-68"><code><span class="comment">Here is the list of actions. "Arguments" and "pipelines" are evaluations of</span></code></span>
<span class="codeline" id="line-69"><code><span class="comment">data, defined in detail in the corresponding sections that follow.</span></code></span>
<span class="codeline" id="line-70"><code></code></span>
<span class="codeline" id="line-71"><code><span class="comment">*/</span></code></span>
<span class="codeline" id="line-72"><code><span class="comment">//	{{/* a comment */}}</span></code></span>
<span class="codeline" id="line-73"><code><span class="comment">//	{{- /* a comment with white space trimmed from preceding and following text */ -}}</span></code></span>
<span class="codeline" id="line-74"><code><span class="comment">//		A comment; discarded. May contain newlines.</span></code></span>
<span class="codeline" id="line-75"><code><span class="comment">//		Comments do not nest and must start and end at the</span></code></span>
<span class="codeline" id="line-76"><code><span class="comment">//		delimiters, as shown here.</span></code></span>
<span class="codeline" id="line-77"><code><span class="comment">/*</span></code></span>
<span class="codeline" id="line-78"><code></code></span>
<span class="codeline" id="line-79"><code><span class="comment">	{{pipeline}}</span></code></span>
<span class="codeline" id="line-80"><code><span class="comment">		The default textual representation (the same as would be</span></code></span>
<span class="codeline" id="line-81"><code><span class="comment">		printed by fmt.Print) of the value of the pipeline is copied</span></code></span>
<span class="codeline" id="line-82"><code><span class="comment">		to the output.</span></code></span>
<span class="codeline" id="line-83"><code></code></span>
<span class="codeline" id="line-84"><code><span class="comment">	{{if pipeline}} T1 {{end}}</span></code></span>
<span class="codeline" id="line-85"><code><span class="comment">		If the value of the pipeline is empty, no output is generated;</span></code></span>
<span class="codeline" id="line-86"><code><span class="comment">		otherwise, T1 is executed. The empty values are false, 0, any</span></code></span>
<span class="codeline" id="line-87"><code><span class="comment">		nil pointer or interface value, and any array, slice, map, or</span></code></span>
<span class="codeline" id="line-88"><code><span class="comment">		string of length zero.</span></code></span>
<span class="codeline" id="line-89"><code><span class="comment">		Dot is unaffected.</span></code></span>
<span class="codeline" id="line-90"><code></code></span>
<span class="codeline" id="line-91"><code><span class="comment">	{{if pipeline}} T1 {{else}} T0 {{end}}</span></code></span>
<span class="codeline" id="line-92"><code><span class="comment">		If the value of the pipeline is empty, T0 is executed;</span></code></span>
<span class="codeline" id="line-93"><code><span class="comment">		otherwise, T1 is executed. Dot is unaffected.</span></code></span>
<span class="codeline" id="line-94"><code></code></span>
<span class="codeline" id="line-95"><code><span class="comment">	{{if pipeline}} T1 {{else if pipeline}} T0 {{end}}</span></code></span>
<span class="codeline" id="line-96"><code><span class="comment">		To simplify the appearance of if-else chains, the else action</span></code></span>
<span class="codeline" id="line-97"><code><span class="comment">		of an if may include another if directly; the effect is exactly</span></code></span>
<span class="codeline" id="line-98"><code><span class="comment">		the same as writing</span></code></span>
<span class="codeline" id="line-99"><code><span class="comment">			{{if pipeline}} T1 {{else}}{{if pipeline}} T0 {{end}}{{end}}</span></code></span>
<span class="codeline" id="line-100"><code></code></span>
<span class="codeline" id="line-101"><code><span class="comment">	{{range pipeline}} T1 {{end}}</span></code></span>
<span class="codeline" id="line-102"><code><span class="comment">		The value of the pipeline must be an array, slice, map, or channel.</span></code></span>
<span class="codeline" id="line-103"><code><span class="comment">		If the value of the pipeline has length zero, nothing is output;</span></code></span>
<span class="codeline" id="line-104"><code><span class="comment">		otherwise, dot is set to the successive elements of the array,</span></code></span>
<span class="codeline" id="line-105"><code><span class="comment">		slice, or map and T1 is executed. If the value is a map and the</span></code></span>
<span class="codeline" id="line-106"><code><span class="comment">		keys are of basic type with a defined order, the elements will be</span></code></span>
<span class="codeline" id="line-107"><code><span class="comment">		visited in sorted key order.</span></code></span>
<span class="codeline" id="line-108"><code></code></span>
<span class="codeline" id="line-109"><code><span class="comment">	{{range pipeline}} T1 {{else}} T0 {{end}}</span></code></span>
<span class="codeline" id="line-110"><code><span class="comment">		The value of the pipeline must be an array, slice, map, or channel.</span></code></span>
<span class="codeline" id="line-111"><code><span class="comment">		If the value of the pipeline has length zero, dot is unaffected and</span></code></span>
<span class="codeline" id="line-112"><code><span class="comment">		T0 is executed; otherwise, dot is set to the successive elements</span></code></span>
<span class="codeline" id="line-113"><code><span class="comment">		of the array, slice, or map and T1 is executed.</span></code></span>
<span class="codeline" id="line-114"><code></code></span>
<span class="codeline" id="line-115"><code><span class="comment">	{{template "name"}}</span></code></span>
<span class="codeline" id="line-116"><code><span class="comment">		The template with the specified name is executed with nil data.</span></code></span>
<span class="codeline" id="line-117"><code></code></span>
<span class="codeline" id="line-118"><code><span class="comment">	{{template "name" pipeline}}</span></code></span>
<span class="codeline" id="line-119"><code><span class="comment">		The template with the specified name is executed with dot set</span></code></span>
<span class="codeline" id="line-120"><code><span class="comment">		to the value of the pipeline.</span></code></span>
<span class="codeline" id="line-121"><code></code></span>
<span class="codeline" id="line-122"><code><span class="comment">	{{block "name" pipeline}} T1 {{end}}</span></code></span>
<span class="codeline" id="line-123"><code><span class="comment">		A block is shorthand for defining a template</span></code></span>
<span class="codeline" id="line-124"><code><span class="comment">			{{define "name"}} T1 {{end}}</span></code></span>
<span class="codeline" id="line-125"><code><span class="comment">		and then executing it in place</span></code></span>
<span class="codeline" id="line-126"><code><span class="comment">			{{template "name" pipeline}}</span></code></span>
<span class="codeline" id="line-127"><code><span class="comment">		The typical use is to define a set of root templates that are</span></code></span>
<span class="codeline" id="line-128"><code><span class="comment">		then customized by redefining the block templates within.</span></code></span>
<span class="codeline" id="line-129"><code></code></span>
<span class="codeline" id="line-130"><code><span class="comment">	{{with pipeline}} T1 {{end}}</span></code></span>
<span class="codeline" id="line-131"><code><span class="comment">		If the value of the pipeline is empty, no output is generated;</span></code></span>
<span class="codeline" id="line-132"><code><span class="comment">		otherwise, dot is set to the value of the pipeline and T1 is</span></code></span>
<span class="codeline" id="line-133"><code><span class="comment">		executed.</span></code></span>
<span class="codeline" id="line-134"><code></code></span>
<span class="codeline" id="line-135"><code><span class="comment">	{{with pipeline}} T1 {{else}} T0 {{end}}</span></code></span>
<span class="codeline" id="line-136"><code><span class="comment">		If the value of the pipeline is empty, dot is unaffected and T0</span></code></span>
<span class="codeline" id="line-137"><code><span class="comment">		is executed; otherwise, dot is set to the value of the pipeline</span></code></span>
<span class="codeline" id="line-138"><code><span class="comment">		and T1 is executed.</span></code></span>
<span class="codeline" id="line-139"><code></code></span>
<span class="codeline" id="line-140"><code><span class="comment">Arguments</span></code></span>
<span class="codeline" id="line-141"><code></code></span>
<span class="codeline" id="line-142"><code><span class="comment">An argument is a simple value, denoted by one of the following.</span></code></span>
<span class="codeline" id="line-143"><code></code></span>
<span class="codeline" id="line-144"><code><span class="comment">	- A boolean, string, character, integer, floating-point, imaginary</span></code></span>
<span class="codeline" id="line-145"><code><span class="comment">	  or complex constant in Go syntax. These behave like Go's untyped</span></code></span>
<span class="codeline" id="line-146"><code><span class="comment">	  constants. Note that, as in Go, whether a large integer constant</span></code></span>
<span class="codeline" id="line-147"><code><span class="comment">	  overflows when assigned or passed to a function can depend on whether</span></code></span>
<span class="codeline" id="line-148"><code><span class="comment">	  the host machine's ints are 32 or 64 bits.</span></code></span>
<span class="codeline" id="line-149"><code><span class="comment">	- The keyword nil, representing an untyped Go nil.</span></code></span>
<span class="codeline" id="line-150"><code><span class="comment">	- The character '.' (period):</span></code></span>
<span class="codeline" id="line-151"><code><span class="comment">		.</span></code></span>
<span class="codeline" id="line-152"><code><span class="comment">	  The result is the value of dot.</span></code></span>
<span class="codeline" id="line-153"><code><span class="comment">	- A variable name, which is a (possibly empty) alphanumeric string</span></code></span>
<span class="codeline" id="line-154"><code><span class="comment">	  preceded by a dollar sign, such as</span></code></span>
<span class="codeline" id="line-155"><code><span class="comment">		$piOver2</span></code></span>
<span class="codeline" id="line-156"><code><span class="comment">	  or</span></code></span>
<span class="codeline" id="line-157"><code><span class="comment">		$</span></code></span>
<span class="codeline" id="line-158"><code><span class="comment">	  The result is the value of the variable.</span></code></span>
<span class="codeline" id="line-159"><code><span class="comment">	  Variables are described below.</span></code></span>
<span class="codeline" id="line-160"><code><span class="comment">	- The name of a field of the data, which must be a struct, preceded</span></code></span>
<span class="codeline" id="line-161"><code><span class="comment">	  by a period, such as</span></code></span>
<span class="codeline" id="line-162"><code><span class="comment">		.Field</span></code></span>
<span class="codeline" id="line-163"><code><span class="comment">	  The result is the value of the field. Field invocations may be</span></code></span>
<span class="codeline" id="line-164"><code><span class="comment">	  chained:</span></code></span>
<span class="codeline" id="line-165"><code><span class="comment">	    .Field1.Field2</span></code></span>
<span class="codeline" id="line-166"><code><span class="comment">	  Fields can also be evaluated on variables, including chaining:</span></code></span>
<span class="codeline" id="line-167"><code><span class="comment">	    $x.Field1.Field2</span></code></span>
<span class="codeline" id="line-168"><code><span class="comment">	- The name of a key of the data, which must be a map, preceded</span></code></span>
<span class="codeline" id="line-169"><code><span class="comment">	  by a period, such as</span></code></span>
<span class="codeline" id="line-170"><code><span class="comment">		.Key</span></code></span>
<span class="codeline" id="line-171"><code><span class="comment">	  The result is the map element value indexed by the key.</span></code></span>
<span class="codeline" id="line-172"><code><span class="comment">	  Key invocations may be chained and combined with fields to any</span></code></span>
<span class="codeline" id="line-173"><code><span class="comment">	  depth:</span></code></span>
<span class="codeline" id="line-174"><code><span class="comment">	    .Field1.Key1.Field2.Key2</span></code></span>
<span class="codeline" id="line-175"><code><span class="comment">	  Although the key must be an alphanumeric identifier, unlike with</span></code></span>
<span class="codeline" id="line-176"><code><span class="comment">	  field names they do not need to start with an upper case letter.</span></code></span>
<span class="codeline" id="line-177"><code><span class="comment">	  Keys can also be evaluated on variables, including chaining:</span></code></span>
<span class="codeline" id="line-178"><code><span class="comment">	    $x.key1.key2</span></code></span>
<span class="codeline" id="line-179"><code><span class="comment">	- The name of a niladic method of the data, preceded by a period,</span></code></span>
<span class="codeline" id="line-180"><code><span class="comment">	  such as</span></code></span>
<span class="codeline" id="line-181"><code><span class="comment">		.Method</span></code></span>
<span class="codeline" id="line-182"><code><span class="comment">	  The result is the value of invoking the method with dot as the</span></code></span>
<span class="codeline" id="line-183"><code><span class="comment">	  receiver, dot.Method(). Such a method must have one return value (of</span></code></span>
<span class="codeline" id="line-184"><code><span class="comment">	  any type) or two return values, the second of which is an error.</span></code></span>
<span class="codeline" id="line-185"><code><span class="comment">	  If it has two and the returned error is non-nil, execution terminates</span></code></span>
<span class="codeline" id="line-186"><code><span class="comment">	  and an error is returned to the caller as the value of Execute.</span></code></span>
<span class="codeline" id="line-187"><code><span class="comment">	  Method invocations may be chained and combined with fields and keys</span></code></span>
<span class="codeline" id="line-188"><code><span class="comment">	  to any depth:</span></code></span>
<span class="codeline" id="line-189"><code><span class="comment">	    .Field1.Key1.Method1.Field2.Key2.Method2</span></code></span>
<span class="codeline" id="line-190"><code><span class="comment">	  Methods can also be evaluated on variables, including chaining:</span></code></span>
<span class="codeline" id="line-191"><code><span class="comment">	    $x.Method1.Field</span></code></span>
<span class="codeline" id="line-192"><code><span class="comment">	- The name of a niladic function, such as</span></code></span>
<span class="codeline" id="line-193"><code><span class="comment">		fun</span></code></span>
<span class="codeline" id="line-194"><code><span class="comment">	  The result is the value of invoking the function, fun(). The return</span></code></span>
<span class="codeline" id="line-195"><code><span class="comment">	  types and values behave as in methods. Functions and function</span></code></span>
<span class="codeline" id="line-196"><code><span class="comment">	  names are described below.</span></code></span>
<span class="codeline" id="line-197"><code><span class="comment">	- A parenthesized instance of one the above, for grouping. The result</span></code></span>
<span class="codeline" id="line-198"><code><span class="comment">	  may be accessed by a field or map key invocation.</span></code></span>
<span class="codeline" id="line-199"><code><span class="comment">		print (.F1 arg1) (.F2 arg2)</span></code></span>
<span class="codeline" id="line-200"><code><span class="comment">		(.StructValuedMethod "arg").Field</span></code></span>
<span class="codeline" id="line-201"><code></code></span>
<span class="codeline" id="line-202"><code><span class="comment">Arguments may evaluate to any type; if they are pointers the implementation</span></code></span>
<span class="codeline" id="line-203"><code><span class="comment">automatically indirects to the base type when required.</span></code></span>
<span class="codeline" id="line-204"><code><span class="comment">If an evaluation yields a function value, such as a function-valued</span></code></span>
<span class="codeline" id="line-205"><code><span class="comment">field of a struct, the function is not invoked automatically, but it</span></code></span>
<span class="codeline" id="line-206"><code><span class="comment">can be used as a truth value for an if action and the like. To invoke</span></code></span>
<span class="codeline" id="line-207"><code><span class="comment">it, use the call function, defined below.</span></code></span>
<span class="codeline" id="line-208"><code></code></span>
<span class="codeline" id="line-209"><code><span class="comment">Pipelines</span></code></span>
<span class="codeline" id="line-210"><code></code></span>
<span class="codeline" id="line-211"><code><span class="comment">A pipeline is a possibly chained sequence of "commands". A command is a simple</span></code></span>
<span class="codeline" id="line-212"><code><span class="comment">value (argument) or a function or method call, possibly with multiple arguments:</span></code></span>
<span class="codeline" id="line-213"><code></code></span>
<span class="codeline" id="line-214"><code><span class="comment">	Argument</span></code></span>
<span class="codeline" id="line-215"><code><span class="comment">		The result is the value of evaluating the argument.</span></code></span>
<span class="codeline" id="line-216"><code><span class="comment">	.Method [Argument...]</span></code></span>
<span class="codeline" id="line-217"><code><span class="comment">		The method can be alone or the last element of a chain but,</span></code></span>
<span class="codeline" id="line-218"><code><span class="comment">		unlike methods in the middle of a chain, it can take arguments.</span></code></span>
<span class="codeline" id="line-219"><code><span class="comment">		The result is the value of calling the method with the</span></code></span>
<span class="codeline" id="line-220"><code><span class="comment">		arguments:</span></code></span>
<span class="codeline" id="line-221"><code><span class="comment">			dot.Method(Argument1, etc.)</span></code></span>
<span class="codeline" id="line-222"><code><span class="comment">	functionName [Argument...]</span></code></span>
<span class="codeline" id="line-223"><code><span class="comment">		The result is the value of calling the function associated</span></code></span>
<span class="codeline" id="line-224"><code><span class="comment">		with the name:</span></code></span>
<span class="codeline" id="line-225"><code><span class="comment">			function(Argument1, etc.)</span></code></span>
<span class="codeline" id="line-226"><code><span class="comment">		Functions and function names are described below.</span></code></span>
<span class="codeline" id="line-227"><code></code></span>
<span class="codeline" id="line-228"><code><span class="comment">A pipeline may be "chained" by separating a sequence of commands with pipeline</span></code></span>
<span class="codeline" id="line-229"><code><span class="comment">characters '|'. In a chained pipeline, the result of each command is</span></code></span>
<span class="codeline" id="line-230"><code><span class="comment">passed as the last argument of the following command. The output of the final</span></code></span>
<span class="codeline" id="line-231"><code><span class="comment">command in the pipeline is the value of the pipeline.</span></code></span>
<span class="codeline" id="line-232"><code></code></span>
<span class="codeline" id="line-233"><code><span class="comment">The output of a command will be either one value or two values, the second of</span></code></span>
<span class="codeline" id="line-234"><code><span class="comment">which has type error. If that second value is present and evaluates to</span></code></span>
<span class="codeline" id="line-235"><code><span class="comment">non-nil, execution terminates and the error is returned to the caller of</span></code></span>
<span class="codeline" id="line-236"><code><span class="comment">Execute.</span></code></span>
<span class="codeline" id="line-237"><code></code></span>
<span class="codeline" id="line-238"><code><span class="comment">Variables</span></code></span>
<span class="codeline" id="line-239"><code></code></span>
<span class="codeline" id="line-240"><code><span class="comment">A pipeline inside an action may initialize a variable to capture the result.</span></code></span>
<span class="codeline" id="line-241"><code><span class="comment">The initialization has syntax</span></code></span>
<span class="codeline" id="line-242"><code></code></span>
<span class="codeline" id="line-243"><code><span class="comment">	$variable := pipeline</span></code></span>
<span class="codeline" id="line-244"><code></code></span>
<span class="codeline" id="line-245"><code><span class="comment">where $variable is the name of the variable. An action that declares a</span></code></span>
<span class="codeline" id="line-246"><code><span class="comment">variable produces no output.</span></code></span>
<span class="codeline" id="line-247"><code></code></span>
<span class="codeline" id="line-248"><code><span class="comment">Variables previously declared can also be assigned, using the syntax</span></code></span>
<span class="codeline" id="line-249"><code></code></span>
<span class="codeline" id="line-250"><code><span class="comment">	$variable = pipeline</span></code></span>
<span class="codeline" id="line-251"><code></code></span>
<span class="codeline" id="line-252"><code><span class="comment">If a "range" action initializes a variable, the variable is set to the</span></code></span>
<span class="codeline" id="line-253"><code><span class="comment">successive elements of the iteration. Also, a "range" may declare two</span></code></span>
<span class="codeline" id="line-254"><code><span class="comment">variables, separated by a comma:</span></code></span>
<span class="codeline" id="line-255"><code></code></span>
<span class="codeline" id="line-256"><code><span class="comment">	range $index, $element := pipeline</span></code></span>
<span class="codeline" id="line-257"><code></code></span>
<span class="codeline" id="line-258"><code><span class="comment">in which case $index and $element are set to the successive values of the</span></code></span>
<span class="codeline" id="line-259"><code><span class="comment">array/slice index or map key and element, respectively. Note that if there is</span></code></span>
<span class="codeline" id="line-260"><code><span class="comment">only one variable, it is assigned the element; this is opposite to the</span></code></span>
<span class="codeline" id="line-261"><code><span class="comment">convention in Go range clauses.</span></code></span>
<span class="codeline" id="line-262"><code></code></span>
<span class="codeline" id="line-263"><code><span class="comment">A variable's scope extends to the "end" action of the control structure ("if",</span></code></span>
<span class="codeline" id="line-264"><code><span class="comment">"with", or "range") in which it is declared, or to the end of the template if</span></code></span>
<span class="codeline" id="line-265"><code><span class="comment">there is no such control structure. A template invocation does not inherit</span></code></span>
<span class="codeline" id="line-266"><code><span class="comment">variables from the point of its invocation.</span></code></span>
<span class="codeline" id="line-267"><code></code></span>
<span class="codeline" id="line-268"><code><span class="comment">When execution begins, $ is set to the data argument passed to Execute, that is,</span></code></span>
<span class="codeline" id="line-269"><code><span class="comment">to the starting value of dot.</span></code></span>
<span class="codeline" id="line-270"><code></code></span>
<span class="codeline" id="line-271"><code><span class="comment">Examples</span></code></span>
<span class="codeline" id="line-272"><code></code></span>
<span class="codeline" id="line-273"><code><span class="comment">Here are some example one-line templates demonstrating pipelines and variables.</span></code></span>
<span class="codeline" id="line-274"><code><span class="comment">All produce the quoted word "output":</span></code></span>
<span class="codeline" id="line-275"><code></code></span>
<span class="codeline" id="line-276"><code><span class="comment">	{{"\"output\""}}</span></code></span>
<span class="codeline" id="line-277"><code><span class="comment">		A string constant.</span></code></span>
<span class="codeline" id="line-278"><code><span class="comment">	{{`"output"`}}</span></code></span>
<span class="codeline" id="line-279"><code><span class="comment">		A raw string constant.</span></code></span>
<span class="codeline" id="line-280"><code><span class="comment">	{{printf "%q" "output"}}</span></code></span>
<span class="codeline" id="line-281"><code><span class="comment">		A function call.</span></code></span>
<span class="codeline" id="line-282"><code><span class="comment">	{{"output" | printf "%q"}}</span></code></span>
<span class="codeline" id="line-283"><code><span class="comment">		A function call whose final argument comes from the previous</span></code></span>
<span class="codeline" id="line-284"><code><span class="comment">		command.</span></code></span>
<span class="codeline" id="line-285"><code><span class="comment">	{{printf "%q" (print "out" "put")}}</span></code></span>
<span class="codeline" id="line-286"><code><span class="comment">		A parenthesized argument.</span></code></span>
<span class="codeline" id="line-287"><code><span class="comment">	{{"put" | printf "%s%s" "out" | printf "%q"}}</span></code></span>
<span class="codeline" id="line-288"><code><span class="comment">		A more elaborate call.</span></code></span>
<span class="codeline" id="line-289"><code><span class="comment">	{{"output" | printf "%s" | printf "%q"}}</span></code></span>
<span class="codeline" id="line-290"><code><span class="comment">		A longer chain.</span></code></span>
<span class="codeline" id="line-291"><code><span class="comment">	{{with "output"}}{{printf "%q" .}}{{end}}</span></code></span>
<span class="codeline" id="line-292"><code><span class="comment">		A with action using dot.</span></code></span>
<span class="codeline" id="line-293"><code><span class="comment">	{{with $x := "output" | printf "%q"}}{{$x}}{{end}}</span></code></span>
<span class="codeline" id="line-294"><code><span class="comment">		A with action that creates and uses a variable.</span></code></span>
<span class="codeline" id="line-295"><code><span class="comment">	{{with $x := "output"}}{{printf "%q" $x}}{{end}}</span></code></span>
<span class="codeline" id="line-296"><code><span class="comment">		A with action that uses the variable in another action.</span></code></span>
<span class="codeline" id="line-297"><code><span class="comment">	{{with $x := "output"}}{{$x | printf "%q"}}{{end}}</span></code></span>
<span class="codeline" id="line-298"><code><span class="comment">		The same, but pipelined.</span></code></span>
<span class="codeline" id="line-299"><code></code></span>
<span class="codeline" id="line-300"><code><span class="comment">Functions</span></code></span>
<span class="codeline" id="line-301"><code></code></span>
<span class="codeline" id="line-302"><code><span class="comment">During execution functions are found in two function maps: first in the</span></code></span>
<span class="codeline" id="line-303"><code><span class="comment">template, then in the global function map. By default, no functions are defined</span></code></span>
<span class="codeline" id="line-304"><code><span class="comment">in the template but the Funcs method can be used to add them.</span></code></span>
<span class="codeline" id="line-305"><code></code></span>
<span class="codeline" id="line-306"><code><span class="comment">Predefined global functions are named as follows.</span></code></span>
<span class="codeline" id="line-307"><code></code></span>
<span class="codeline" id="line-308"><code><span class="comment">	and</span></code></span>
<span class="codeline" id="line-309"><code><span class="comment">		Returns the boolean AND of its arguments by returning the</span></code></span>
<span class="codeline" id="line-310"><code><span class="comment">		first empty argument or the last argument, that is,</span></code></span>
<span class="codeline" id="line-311"><code><span class="comment">		"and x y" behaves as "if x then y else x". All the</span></code></span>
<span class="codeline" id="line-312"><code><span class="comment">		arguments are evaluated.</span></code></span>
<span class="codeline" id="line-313"><code><span class="comment">	call</span></code></span>
<span class="codeline" id="line-314"><code><span class="comment">		Returns the result of calling the first argument, which</span></code></span>
<span class="codeline" id="line-315"><code><span class="comment">		must be a function, with the remaining arguments as parameters.</span></code></span>
<span class="codeline" id="line-316"><code><span class="comment">		Thus "call .X.Y 1 2" is, in Go notation, dot.X.Y(1, 2) where</span></code></span>
<span class="codeline" id="line-317"><code><span class="comment">		Y is a func-valued field, map entry, or the like.</span></code></span>
<span class="codeline" id="line-318"><code><span class="comment">		The first argument must be the result of an evaluation</span></code></span>
<span class="codeline" id="line-319"><code><span class="comment">		that yields a value of function type (as distinct from</span></code></span>
<span class="codeline" id="line-320"><code><span class="comment">		a predefined function such as print). The function must</span></code></span>
<span class="codeline" id="line-321"><code><span class="comment">		return either one or two result values, the second of which</span></code></span>
<span class="codeline" id="line-322"><code><span class="comment">		is of type error. If the arguments don't match the function</span></code></span>
<span class="codeline" id="line-323"><code><span class="comment">		or the returned error value is non-nil, execution stops.</span></code></span>
<span class="codeline" id="line-324"><code><span class="comment">	html</span></code></span>
<span class="codeline" id="line-325"><code><span class="comment">		Returns the escaped HTML equivalent of the textual</span></code></span>
<span class="codeline" id="line-326"><code><span class="comment">		representation of its arguments. This function is unavailable</span></code></span>
<span class="codeline" id="line-327"><code><span class="comment">		in html/template, with a few exceptions.</span></code></span>
<span class="codeline" id="line-328"><code><span class="comment">	index</span></code></span>
<span class="codeline" id="line-329"><code><span class="comment">		Returns the result of indexing its first argument by the</span></code></span>
<span class="codeline" id="line-330"><code><span class="comment">		following arguments. Thus "index x 1 2 3" is, in Go syntax,</span></code></span>
<span class="codeline" id="line-331"><code><span class="comment">		x[1][2][3]. Each indexed item must be a map, slice, or array.</span></code></span>
<span class="codeline" id="line-332"><code><span class="comment">	slice</span></code></span>
<span class="codeline" id="line-333"><code><span class="comment">		slice returns the result of slicing its first argument by the</span></code></span>
<span class="codeline" id="line-334"><code><span class="comment">		remaining arguments. Thus "slice x 1 2" is, in Go syntax, x[1:2],</span></code></span>
<span class="codeline" id="line-335"><code><span class="comment">		while "slice x" is x[:], "slice x 1" is x[1:], and "slice x 1 2 3"</span></code></span>
<span class="codeline" id="line-336"><code><span class="comment">		is x[1:2:3]. The first argument must be a string, slice, or array.</span></code></span>
<span class="codeline" id="line-337"><code><span class="comment">	js</span></code></span>
<span class="codeline" id="line-338"><code><span class="comment">		Returns the escaped JavaScript equivalent of the textual</span></code></span>
<span class="codeline" id="line-339"><code><span class="comment">		representation of its arguments.</span></code></span>
<span class="codeline" id="line-340"><code><span class="comment">	len</span></code></span>
<span class="codeline" id="line-341"><code><span class="comment">		Returns the integer length of its argument.</span></code></span>
<span class="codeline" id="line-342"><code><span class="comment">	not</span></code></span>
<span class="codeline" id="line-343"><code><span class="comment">		Returns the boolean negation of its single argument.</span></code></span>
<span class="codeline" id="line-344"><code><span class="comment">	or</span></code></span>
<span class="codeline" id="line-345"><code><span class="comment">		Returns the boolean OR of its arguments by returning the</span></code></span>
<span class="codeline" id="line-346"><code><span class="comment">		first non-empty argument or the last argument, that is,</span></code></span>
<span class="codeline" id="line-347"><code><span class="comment">		"or x y" behaves as "if x then x else y". All the</span></code></span>
<span class="codeline" id="line-348"><code><span class="comment">		arguments are evaluated.</span></code></span>
<span class="codeline" id="line-349"><code><span class="comment">	print</span></code></span>
<span class="codeline" id="line-350"><code><span class="comment">		An alias for fmt.Sprint</span></code></span>
<span class="codeline" id="line-351"><code><span class="comment">	printf</span></code></span>
<span class="codeline" id="line-352"><code><span class="comment">		An alias for fmt.Sprintf</span></code></span>
<span class="codeline" id="line-353"><code><span class="comment">	println</span></code></span>
<span class="codeline" id="line-354"><code><span class="comment">		An alias for fmt.Sprintln</span></code></span>
<span class="codeline" id="line-355"><code><span class="comment">	urlquery</span></code></span>
<span class="codeline" id="line-356"><code><span class="comment">		Returns the escaped value of the textual representation of</span></code></span>
<span class="codeline" id="line-357"><code><span class="comment">		its arguments in a form suitable for embedding in a URL query.</span></code></span>
<span class="codeline" id="line-358"><code><span class="comment">		This function is unavailable in html/template, with a few</span></code></span>
<span class="codeline" id="line-359"><code><span class="comment">		exceptions.</span></code></span>
<span class="codeline" id="line-360"><code></code></span>
<span class="codeline" id="line-361"><code><span class="comment">The boolean functions take any zero value to be false and a non-zero</span></code></span>
<span class="codeline" id="line-362"><code><span class="comment">value to be true.</span></code></span>
<span class="codeline" id="line-363"><code></code></span>
<span class="codeline" id="line-364"><code><span class="comment">There is also a set of binary comparison operators defined as</span></code></span>
<span class="codeline" id="line-365"><code><span class="comment">functions:</span></code></span>
<span class="codeline" id="line-366"><code></code></span>
<span class="codeline" id="line-367"><code><span class="comment">	eq</span></code></span>
<span class="codeline" id="line-368"><code><span class="comment">		Returns the boolean truth of arg1 == arg2</span></code></span>
<span class="codeline" id="line-369"><code><span class="comment">	ne</span></code></span>
<span class="codeline" id="line-370"><code><span class="comment">		Returns the boolean truth of arg1 != arg2</span></code></span>
<span class="codeline" id="line-371"><code><span class="comment">	lt</span></code></span>
<span class="codeline" id="line-372"><code><span class="comment">		Returns the boolean truth of arg1 &lt; arg2</span></code></span>
<span class="codeline" id="line-373"><code><span class="comment">	le</span></code></span>
<span class="codeline" id="line-374"><code><span class="comment">		Returns the boolean truth of arg1 &lt;= arg2</span></code></span>
<span class="codeline" id="line-375"><code><span class="comment">	gt</span></code></span>
<span class="codeline" id="line-376"><code><span class="comment">		Returns the boolean truth of arg1 &gt; arg2</span></code></span>
<span class="codeline" id="line-377"><code><span class="comment">	ge</span></code></span>
<span class="codeline" id="line-378"><code><span class="comment">		Returns the boolean truth of arg1 &gt;= arg2</span></code></span>
<span class="codeline" id="line-379"><code></code></span>
<span class="codeline" id="line-380"><code><span class="comment">For simpler multi-way equality tests, eq (only) accepts two or more</span></code></span>
<span class="codeline" id="line-381"><code><span class="comment">arguments and compares the second and subsequent to the first,</span></code></span>
<span class="codeline" id="line-382"><code><span class="comment">returning in effect</span></code></span>
<span class="codeline" id="line-383"><code></code></span>
<span class="codeline" id="line-384"><code><span class="comment">	arg1==arg2 || arg1==arg3 || arg1==arg4 ...</span></code></span>
<span class="codeline" id="line-385"><code></code></span>
<span class="codeline" id="line-386"><code><span class="comment">(Unlike with || in Go, however, eq is a function call and all the</span></code></span>
<span class="codeline" id="line-387"><code><span class="comment">arguments will be evaluated.)</span></code></span>
<span class="codeline" id="line-388"><code></code></span>
<span class="codeline" id="line-389"><code><span class="comment">The comparison functions work on any values whose type Go defines as</span></code></span>
<span class="codeline" id="line-390"><code><span class="comment">comparable. For basic types such as integers, the rules are relaxed:</span></code></span>
<span class="codeline" id="line-391"><code><span class="comment">size and exact type are ignored, so any integer value, signed or unsigned,</span></code></span>
<span class="codeline" id="line-392"><code><span class="comment">may be compared with any other integer value. (The arithmetic value is compared,</span></code></span>
<span class="codeline" id="line-393"><code><span class="comment">not the bit pattern, so all negative integers are less than all unsigned integers.)</span></code></span>
<span class="codeline" id="line-394"><code><span class="comment">However, as usual, one may not compare an int with a float32 and so on.</span></code></span>
<span class="codeline" id="line-395"><code></code></span>
<span class="codeline" id="line-396"><code><span class="comment">Associated templates</span></code></span>
<span class="codeline" id="line-397"><code></code></span>
<span class="codeline" id="line-398"><code><span class="comment">Each template is named by a string specified when it is created. Also, each</span></code></span>
<span class="codeline" id="line-399"><code><span class="comment">template is associated with zero or more other templates that it may invoke by</span></code></span>
<span class="codeline" id="line-400"><code><span class="comment">name; such associations are transitive and form a name space of templates.</span></code></span>
<span class="codeline" id="line-401"><code></code></span>
<span class="codeline" id="line-402"><code><span class="comment">A template may use a template invocation to instantiate another associated</span></code></span>
<span class="codeline" id="line-403"><code><span class="comment">template; see the explanation of the "template" action above. The name must be</span></code></span>
<span class="codeline" id="line-404"><code><span class="comment">that of a template associated with the template that contains the invocation.</span></code></span>
<span class="codeline" id="line-405"><code></code></span>
<span class="codeline" id="line-406"><code><span class="comment">Nested template definitions</span></code></span>
<span class="codeline" id="line-407"><code></code></span>
<span class="codeline" id="line-408"><code><span class="comment">When parsing a template, another template may be defined and associated with the</span></code></span>
<span class="codeline" id="line-409"><code><span class="comment">template being parsed. Template definitions must appear at the top level of the</span></code></span>
<span class="codeline" id="line-410"><code><span class="comment">template, much like global variables in a Go program.</span></code></span>
<span class="codeline" id="line-411"><code></code></span>
<span class="codeline" id="line-412"><code><span class="comment">The syntax of such definitions is to surround each template declaration with a</span></code></span>
<span class="codeline" id="line-413"><code><span class="comment">"define" and "end" action.</span></code></span>
<span class="codeline" id="line-414"><code></code></span>
<span class="codeline" id="line-415"><code><span class="comment">The define action names the template being created by providing a string</span></code></span>
<span class="codeline" id="line-416"><code><span class="comment">constant. Here is a simple example:</span></code></span>
<span class="codeline" id="line-417"><code></code></span>
<span class="codeline" id="line-418"><code><span class="comment">	`{{define "T1"}}ONE{{end}}</span></code></span>
<span class="codeline" id="line-419"><code><span class="comment">	{{define "T2"}}TWO{{end}}</span></code></span>
<span class="codeline" id="line-420"><code><span class="comment">	{{define "T3"}}{{template "T1"}} {{template "T2"}}{{end}}</span></code></span>
<span class="codeline" id="line-421"><code><span class="comment">	{{template "T3"}}`</span></code></span>
<span class="codeline" id="line-422"><code></code></span>
<span class="codeline" id="line-423"><code><span class="comment">This defines two templates, T1 and T2, and a third T3 that invokes the other two</span></code></span>
<span class="codeline" id="line-424"><code><span class="comment">when it is executed. Finally it invokes T3. If executed this template will</span></code></span>
<span class="codeline" id="line-425"><code><span class="comment">produce the text</span></code></span>
<span class="codeline" id="line-426"><code></code></span>
<span class="codeline" id="line-427"><code><span class="comment">	ONE TWO</span></code></span>
<span class="codeline" id="line-428"><code></code></span>
<span class="codeline" id="line-429"><code><span class="comment">By construction, a template may reside in only one association. If it's</span></code></span>
<span class="codeline" id="line-430"><code><span class="comment">necessary to have a template addressable from multiple associations, the</span></code></span>
<span class="codeline" id="line-431"><code><span class="comment">template definition must be parsed multiple times to create distinct *Template</span></code></span>
<span class="codeline" id="line-432"><code><span class="comment">values, or must be copied with the Clone or AddParseTree method.</span></code></span>
<span class="codeline" id="line-433"><code></code></span>
<span class="codeline" id="line-434"><code><span class="comment">Parse may be called multiple times to assemble the various associated templates;</span></code></span>
<span class="codeline" id="line-435"><code><span class="comment">see the ParseFiles and ParseGlob functions and methods for simple ways to parse</span></code></span>
<span class="codeline" id="line-436"><code><span class="comment">related templates stored in files.</span></code></span>
<span class="codeline" id="line-437"><code></code></span>
<span class="codeline" id="line-438"><code><span class="comment">A template may be executed directly or through ExecuteTemplate, which executes</span></code></span>
<span class="codeline" id="line-439"><code><span class="comment">an associated template identified by name. To invoke our example above, we</span></code></span>
<span class="codeline" id="line-440"><code><span class="comment">might write,</span></code></span>
<span class="codeline" id="line-441"><code></code></span>
<span class="codeline" id="line-442"><code><span class="comment">	err := tmpl.Execute(os.Stdout, "no data needed")</span></code></span>
<span class="codeline" id="line-443"><code><span class="comment">	if err != nil {</span></code></span>
<span class="codeline" id="line-444"><code><span class="comment">		log.Fatalf("execution failed: %s", err)</span></code></span>
<span class="codeline" id="line-445"><code><span class="comment">	}</span></code></span>
<span class="codeline" id="line-446"><code></code></span>
<span class="codeline" id="line-447"><code><span class="comment">or to invoke a particular template explicitly by name,</span></code></span>
<span class="codeline" id="line-448"><code></code></span>
<span class="codeline" id="line-449"><code><span class="comment">	err := tmpl.ExecuteTemplate(os.Stdout, "T2", "no data needed")</span></code></span>
<span class="codeline" id="line-450"><code><span class="comment">	if err != nil {</span></code></span>
<span class="codeline" id="line-451"><code><span class="comment">		log.Fatalf("execution failed: %s", err)</span></code></span>
<span class="codeline" id="line-452"><code><span class="comment">	}</span></code></span>
<span class="codeline" id="line-453"><code></code></span>
<span class="codeline" id="line-454"><code><span class="comment">*/</span></code></span></div><span class="codeline" id="line-455"><code><span class="keyword">package</span> template</code></span>
</pre><pre id="footer">
<table><tr><td><img src="../../../png/go101-twitter.png"></td>
<td>The pages are generated with <a href="https://go101.org/article/tool-golds.html"><b>Golds</b></a> <i>v0.4.1</i>. (GOOS=linux GOARCH=amd64)
<b>Golds</b> is a <a href="https://go101.org">Go 101</a> project developed by <a href="https://tapirgames.com">Tapir Liu</a>.
PR and bug reports are welcome and can be submitted to <a href="https://github.com/go101/golds">the issue list</a>.
Please follow <a href="https://twitter.com/go100and1">@Go100and1</a> (reachable from the left QR code) to get the latest news of <b>Golds</b>.</td></tr></table></pre>